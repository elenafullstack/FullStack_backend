(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(17),i=n.n(a),s=n(5),u=n(3),o=n(2),l=n.n(o),j=n(0),d=function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)("view"),s=Object(u.a)(i,2),o=s[0],l=s[1],d={display:c?"none":""},b={display:c?"":"none"},h=function(){a(!c),l(!1===c?"hide":"view")};return Object(j.jsxs)("div",{style:{padding:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},children:[Object(j.jsx)("div",{style:d,children:Object(j.jsxs)("p",{children:[" ",e.blog.title," ",e.blog.author,Object(j.jsx)("button",{onClick:h,children:o})]})}),Object(j.jsxs)("div",{style:b,className:"content",children:[Object(j.jsxs)("p",{children:[" ",e.blog.title," ",e.blog.author,Object(j.jsx)("button",{onClick:h,children:o})]}),e.children]})]})},b=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:e.url}),Object(j.jsxs)("p",{children:[" Likes ",e.likes," ",Object(j.jsx)("button",{onClick:function(){return e.function(e.blog)},children:"Like"})," "]}),Object(j.jsx)("p",{children:e.user}),Object(j.jsx)("button",{onClick:function(){return e.function2(e.blog)},children:"Delete blog"})]})},h=function(e){if(null!==e.user)return Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:[e.user.name," is logged in ",Object(j.jsx)("button",{onClick:function(){return e.function()},children:" Log out "})]})})},f=function(e){return null!==e.message&&""!==e.message?Object(j.jsx)("div",{className:"message",children:Object(j.jsx)("p",{children:e.message})}):Object(j.jsx)("div",{className:"nothing",children:Object(j.jsx)("p",{children:e.message})})},p=function(e){var t=e.handleSubmit,n=e.handleTitleChange,r=e.handleAuthorChange,c=e.handleUrlChange,a=e.title,i=e.author,s=e.url;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["title:",Object(j.jsx)("input",{type:"text",value:a,name:"title",onChange:n,placeholder:"write title"})]}),Object(j.jsxs)("div",{children:["author",Object(j.jsx)("input",{type:"text",value:i,name:"author",onChange:r,placeholder:"write author"})]}),Object(j.jsxs)("div",{children:["url",Object(j.jsx)("input",{type:"text",value:s,name:"url",onChange:c,placeholder:"write url"})]}),Object(j.jsx)("button",{type:"submit",children:"create"})]})},O=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),c=Object(u.a)(n,2),a=c[0],i=c[1],s={display:a?"none":""},o={display:a?"":"none"},l=function(){i(!a)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:l}})),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:s,children:Object(j.jsx)("button",{onClick:l,children:e.buttonLabel})}),Object(j.jsxs)("div",{style:o,children:[e.children,Object(j.jsx)("button",{onClick:l,children:"cancel"})]})]})})),g=function(e){return null!==e.message&&""!==e.message?Object(j.jsx)("div",{className:"badmessage",children:Object(j.jsx)("p",{children:e.message})}):Object(j.jsx)("div",{className:"nothing",children:Object(j.jsx)("p",{children:e.message})})},x=n(6),v=n.n(x),m="/api/blogs",w=null,k=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:w}},e.next=3,v.a.post(m,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(m,"/").concat(t.id),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:w}},e.abrupt("return",v.a.delete("".concat(m,"/").concat(t.id),n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={getAll:function(){return v.a.get(m).then((function(e){return e.data}))},setToken:function(e){w="bearer ".concat(e)},create:k,update:y,deleteBlog:S},A=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,v.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B={login:A},L=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(u.a)(a,2),o=i[0],x=i[1],v=Object(r.useState)(null),m=Object(u.a)(v,2),w=m[0],k=m[1],y=Object(r.useState)(""),S=Object(u.a)(y,2),A=S[0],L=S[1],N=Object(r.useState)(""),T=Object(u.a)(N,2),U=T[0],I=T[1],D=Object(r.useState)(""),J=Object(u.a)(D,2),E=J[0],z=J[1],R=Object(r.useState)(""),V=Object(u.a)(R,2),H=V[0],P=V[1],W=Object(r.useState)(""),q=Object(u.a)(W,2),F=q[0],G=q[1],K=Object(r.useState)(""),M=Object(u.a)(K,2),Q=M[0],X=M[1];console.log(10);var Y=Object(r.useRef)();Object(r.useEffect)((function(){C.getAll().then((function(e){return x(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogUser");if(e){var t=JSON.parse(e);k(t),C.setToken(t.token),console.log(t)}}),[]);var Z=function(){var e=Object(s.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:n,password:A},e.prev=2,e.next=5,B.login(r);case 5:a=e.sent,window.localStorage.setItem("loggedBlogUser",JSON.stringify(a)),k(a),C.setToken(a.token),c(""),L(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),X("wrong username or password"),setTimeout((function(){X(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Y.current.toggleVisibility(),n={author:H,title:E,url:F},e.next=5,C.create(n);case 5:r=e.sent,c=o.concat(r),x(c),console.log(o),I("A new blog '".concat(r.title,"' added    ")),setTimeout((function(){I(null)}),5e3);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={author:t.author,title:t.title,url:t.url,likes:t.likes+1}).id=t.id,e.next=4,C.update(t,n);case 4:r=e.sent,x(o.map((function(e){return e.id!==t.id?e:r})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete blog ".concat(t.title,"?"))){e.next=4;break}return e.next=3,C.deleteBlog(t);case 3:x(o.filter((function(e){return e.id!==t.id})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===w?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Log in"}),Object(j.jsx)(g,{message:Q}),Object(j.jsxs)("form",{onSubmit:Z,children:[Object(j.jsxs)("div",{children:["username",Object(j.jsx)("input",{type:"text",value:n,name:"Username",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(j.jsxs)("div",{children:["password",Object(j.jsx)("input",{type:"password",value:A,name:"Password",onChange:function(e){var t=e.target;return L(t.value)}})]}),Object(j.jsx)("button",{type:"submit",children:"login"})]})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)(f,{message:U}),Object(j.jsx)("h2",{children:"blogs"}),Object(j.jsx)(h,{user:w,function:function(){window.localStorage.removeItem("loggedBlogUser"),k(null)}}),Object(j.jsx)(O,{buttonLabel:"create new blog",ref:Y,children:Object(j.jsx)(p,{title:E,author:H,url:F,handleTitleChange:function(e){var t=e.target;return z(t.value)},handleAuthorChange:function(e){var t=e.target;return P(t.value)},handleUrlChange:function(e){var t=e.target;return G(t.value)},handleSubmit:$})}),Object(j.jsx)("br",{}),o.filter((function(e){return e.user.toString()===w.id.toString()})).sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(j.jsx)(d,{blog:e,children:Object(j.jsx)(b,{blog:e,url:e.url,likes:e.likes,user:w.name,function:_,function2:ee},e.id)},e.id)}))]})};n(43);i.a.render(Object(j.jsx)(L,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.49267a73.chunk.js.map